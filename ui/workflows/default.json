{
  "id": "workflow-1",
  "name": "Obelisk Workflow",
  "nodes": [
    {
      "id": "12",
      "type": "telegram_listener",
      "position": {
        "x": 11,
        "y": 170
      },
      "inputs": {},
      "metadata": {
        "bot_token": "{{process.env.TELEGRAM_DEV_AGENT_BOT_TOKEN}}",
        "poll_interval": 2
      }
    },
    {
      "id": "15",
      "type": "telegram_memory_creator",
      "position": {
        "x": 916,
        "y": 236
      },
      "inputs": {},
      "metadata": {
        "summarize_threshold": 20
      }
    },
    {
      "id": "16",
      "type": "memory_storage",
      "position": {
        "x": 585,
        "y": 641
      },
      "inputs": {},
      "metadata": {
        "storage_path": "default",
        "storage_type": "local_json"
      }
    },
    {
      "id": "4",
      "type": "model_loader",
      "position": {
        "x": 327,
        "y": 432
      },
      "inputs": {},
      "metadata": {
        "model_path": "models/default_model",
        "auto_load": true
      }
    },
    {
      "id": "7",
      "type": "text",
      "position": {
        "x": 2182,
        "y": 171
      },
      "inputs": {
        "text": ""
      },
      "metadata": {
        "text": ""
      }
    },
    {
      "id": "10",
      "type": "telegram_bot",
      "position": {
        "x": 2581,
        "y": 196
      },
      "inputs": {},
      "metadata": {
        "bot_id": "{{process.env.TELEGRAM_DEV_AGENT_BOT_TOKEN}}",
        "chat_id": ""
      }
    },
    {
      "id": "17",
      "type": "binary_intent",
      "position": {
        "x": 1525,
        "y": 420
      },
      "inputs": {},
      "metadata": {
        "intent_criteria": "Should the bot respond to this message?\n\nNote: @mentions and direct replies are already handled separately. This message was NOT a mention or reply, so use context clues only.\n\nRespond TRUE if the message:\n- Asks a question the bot can answer (tech, AI, crypto, general knowledge)\n- Explicitly calls out the bot by name (Overseer, Agent #001, Obelisk Agent, The Obelisk)\n- Is a direct request or prompt clearly meant for the bot\n- Raises a topic the bot has relevant context on from recent conversation\n\nRespond FALSE if:\n- General chatter between users not involving the bot\n- Reactions, emojis, short acknowledgments (ok, lol, nice, etc.)\n- Talking ABOUT the bot to others, not TO the bot\n- Off-topic banter the bot has nothing to add to"
      }
    },
    {
      "id": "6",
      "type": "inference",
      "position": {
        "x": 2000,
        "y": 100
      },
      "inputs": {},
      "metadata": {
        "quantum_influence": 0.7,
        "max_length": 1024,
        "enable_thinking": true,
        "system_prompt": "You are Obelisk Agent #001, a sharp and concise AI.\n\nRules:\n- Keep responses SHORT. 1-3 sentences max unless the user explicitly asks for detail.\n- Be direct, witty, and to the point. No filler, no fluff.\n- Use conversation history and memories to recall facts when relevant.\n- No emojis. No bullet lists unless asked. No repeating the question back.\n- If you don't know, say so in one line."
      }
    },
    {
      "id": "14",
      "type": "telegram_memory_selector",
      "position": {
        "x": 936,
        "y": 477
      },
      "inputs": {},
      "metadata": {
        "recent_count": 20,
        "include_summaries": true
      }
    },
    {
      "id": "18",
      "type": "boolean_logic",
      "position": {
        "x": 1280,
        "y": 400
      },
      "inputs": {},
      "metadata": {
        "operation": "OR"
      }
    },
    {
      "id": "19",
      "type": "boolean_logic",
      "position": {
        "x": 1780,
        "y": 260
      },
      "inputs": {},
      "metadata": {
        "operation": "OR"
      }
    }
  ],
  "connections": [
    {
      "from": "12",
      "from_output": "message",
      "to": "15",
      "to_input": "message"
    },
    {
      "from": "12",
      "from_output": "message",
      "to": "14",
      "to_input": "message"
    },
    {
      "from": "12",
      "from_output": "user_id",
      "to": "15",
      "to_input": "user_id"
    },
    {
      "from": "12",
      "from_output": "username",
      "to": "15",
      "to_input": "username"
    },
    {
      "from": "12",
      "from_output": "chat_id",
      "to": "15",
      "to_input": "chat_id"
    },
    {
      "from": "12",
      "from_output": "chat_id",
      "to": "14",
      "to_input": "chat_id"
    },
    {
      "from": "12",
      "from_output": "chat_id",
      "to": "10",
      "to_input": "chat_id"
    },
    {
      "from": "12",
      "from_output": "message_id",
      "to": "10",
      "to_input": "message_id"
    },
    {
      "from": "16",
      "from_output": "storage_instance",
      "to": "15",
      "to_input": "storage_instance"
    },
    {
      "from": "16",
      "from_output": "storage_instance",
      "to": "14",
      "to_input": "storage_instance"
    },
    {
      "from": "4",
      "from_output": "model",
      "to": "6",
      "to_input": "model"
    },
    {
      "from": "4",
      "from_output": "model",
      "to": "15",
      "to_input": "model"
    },
    {
      "from": "4",
      "from_output": "model",
      "to": "14",
      "to_input": "model"
    },
    {
      "from": "4",
      "from_output": "model",
      "to": "17",
      "to_input": "model"
    },
    {
      "from": "7",
      "from_output": "text",
      "to": "10",
      "to_input": "message"
    },
    {
      "from": "6",
      "from_output": "response",
      "to": "7",
      "to_input": "text"
    },
    {
      "from": "14",
      "from_output": "context",
      "to": "6",
      "to_input": "context"
    },
    {
      "from": "12",
      "from_output": "is_mention",
      "to": "18",
      "to_input": "a"
    },
    {
      "from": "12",
      "from_output": "is_reply_to_bot",
      "to": "18",
      "to_input": "b"
    },
    {
      "from": "14",
      "from_output": "message",
      "to": "18",
      "to_input": "value"
    },
    {
      "from": "18",
      "from_output": "reject",
      "to": "17",
      "to_input": "message"
    },
    {
      "from": "18",
      "from_output": "result",
      "to": "19",
      "to_input": "a"
    },
    {
      "from": "17",
      "from_output": "result",
      "to": "19",
      "to_input": "b"
    },
    {
      "from": "14",
      "from_output": "message",
      "to": "19",
      "to_input": "value"
    },
    {
      "from": "19",
      "from_output": "pass",
      "to": "6",
      "to_input": "query"
    }
  ]
}
