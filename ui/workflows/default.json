{
  "id": "workflow-1",
  "name": "Obelisk Workflow",
  "nodes": [
    {
      "id": "16",
      "type": "memory_storage",
      "position": {
        "x": 585,
        "y": 641
      },
      "inputs": {},
      "metadata": {
        "storage_path": "default",
        "storage_type": "local_json",
        "Storage Path": "default",
        "Storage Type": "local_json"
      }
    },
    {
      "id": "4",
      "type": "model_loader",
      "position": {
        "x": 327,
        "y": 432
      },
      "inputs": {},
      "metadata": {
        "endpoint_url": "http://localhost:7780",
        "use_default": true,
        "model_path": "models/default_model",
        "auto_load": true
      }
    },
    {
      "id": "12",
      "type": "telegram_listener",
      "position": {
        "x": -94,
        "y": 166
      },
      "inputs": {},
      "metadata": {
        "bot_token": "{{process.env.TELEGRAM_DEV_AGENT_BOT_TOKEN}}",
        "poll_interval": 2
      }
    },
    {
      "id": "20",
      "type": "reroute",
      "position": {
        "x": 204,
        "y": -159
      },
      "inputs": {},
      "metadata": {
        "showType": false
      }
    },
    {
      "id": "21",
      "type": "reroute",
      "position": {
        "x": 207,
        "y": -125
      },
      "inputs": {},
      "metadata": {
        "showType": false
      }
    },
    {
      "id": "23",
      "type": "reroute",
      "position": {
        "x": 2476,
        "y": -129
      },
      "inputs": {},
      "metadata": {
        "showType": false
      }
    },
    {
      "id": "22",
      "type": "reroute",
      "position": {
        "x": 2476,
        "y": -162
      },
      "inputs": {},
      "metadata": {
        "showType": false
      }
    },
    {
      "id": "15",
      "type": "telegram_memory_creator",
      "position": {
        "x": 762,
        "y": 44
      },
      "inputs": {},
      "metadata": {
        "summarize_threshold": 20
      }
    },
    {
      "id": "14",
      "type": "telegram_memory_selector",
      "position": {
        "x": 840,
        "y": 292
      },
      "inputs": {},
      "metadata": {
        "recent_count": 20,
        "include_summaries": true,
        "Recent Messages": 20,
        "Include Summaries": true
      }
    },
    {
      "id": "17",
      "type": "binary_intent",
      "position": {
        "x": 1382,
        "y": 377
      },
      "inputs": {},
      "metadata": {
        "intent_criteria": "Should the bot respond to this message?\n\nNote: @mentions and direct replies are already handled separately. This message was NOT a mention or reply, so use context clues only.\n\nRespond TRUE if the message:\n- Asks a question the bot can answer (tech, AI, crypto, general knowledge)\n- Explicitly calls out the bot by name (Overseer, Agent #001, Obelisk Agent, The Obelisk)\n- Is a direct request or prompt clearly meant for the bot\n- Raises a topic the bot has relevant context on from recent conversation\n\nRespond FALSE if:\n- General chatter between users not involving the bot\n- Reactions, emojis, short acknowledgments (ok, lol, nice, etc.)\n- Talking ABOUT the bot to others, not TO the bot\n- Off-topic banter the bot has nothing to add to"
      }
    },
    {
      "id": "18",
      "type": "boolean_logic",
      "position": {
        "x": 1116,
        "y": -33
      },
      "inputs": {},
      "metadata": {
        "operation": "OR"
      }
    },
    {
      "id": "24",
      "type": "boolean_logic",
      "position": {
        "x": 1381,
        "y": -31
      },
      "inputs": {},
      "metadata": {
        "operation": "OR"
      }
    },
    {
      "id": "19",
      "type": "boolean_logic",
      "position": {
        "x": 1670,
        "y": -29
      },
      "inputs": {},
      "metadata": {
        "operation": "OR"
      }
    },
    {
      "id": "27",
      "type": "text",
      "position": {
        "x": 3036,
        "y": 269
      },
      "inputs": {},
      "metadata": {
        "text": ""
      }
    },
    {
      "id": "26",
      "type": "telegram_action",
      "position": {
        "x": 2808,
        "y": 68
      },
      "inputs": {},
      "metadata": {
        "bot_id": "{{process.env.TELEGRAM_DEV_AGENT_BOT_TOKEN}}"
      }
    },
    {
      "id": "25",
      "type": "action_router",
      "position": {
        "x": 2356,
        "y": 36
      },
      "inputs": {},
      "metadata": {}
    },
    {
      "id": "28",
      "type": "blockchain_config",
      "position": { "x": -200, "y": 400 },
      "inputs": {},
      "metadata": { "blockchain_service_url": "http://localhost:8888" }
    },
    {
      "id": "29",
      "type": "scheduler",
      "position": { "x": -200, "y": 520 },
      "inputs": {},
      "metadata": { "min_seconds": 60, "max_seconds": 60, "enabled": true }
    },
    {
      "id": "30",
      "type": "clanker_launch_summary",
      "position": { "x": 80, "y": 460 },
      "inputs": {},
      "metadata": { "window_hours": 1, "limit": 20 }
    },
    {
      "id": "31",
      "type": "text",
      "position": { "x": 380, "y": 460 },
      "inputs": {},
      "metadata": { "text": "Recent Clanker launches (see connected input)" }
    },
    {
      "id": "32",
      "type": "wallet",
      "position": { "x": 2356, "y": 220 },
      "inputs": {},
      "metadata": { "private_key": "{{process.env.SWAP_PRIVATE_KEY}}" }
    },
    {
      "id": "33",
      "type": "clanker_buy",
      "position": { "x": 2600, "y": 220 },
      "inputs": {},
      "metadata": { "amount_wei": "0" }
    },
    {
      "id": "6",
      "type": "inference",
      "position": {
        "x": 1943,
        "y": 19
      },
      "inputs": {},
      "metadata": {
        "quantum_influence": 0.7,
        "max_length": 1024,
        "system_prompt": "You are Obelisk Agent #001, a sharp and concise AI.\n\nRules:\n- Keep responses SHORT. 1-3 sentences max unless the user explicitly asks for detail.\n- Be direct, witty, and to the point. No filler, no fluff.\n- Use the context you receive (recent messages, chat summaries, memories) to answer. Never say you have no memories or no context when context was provided.\n- When the user asks what you remember, what memories you have, or what happened recently: use the provided context and reply with specific, concrete details from it (e.g. recent topics, who said what, summaries). Do NOT say \"nothing\" or \"I don't have memories\" if context is present.\n- No emojis. No bullet lists unless asked. No repeating the question back.\n- If you genuinely don't know, say so in one line.\n\nOutput format (JSON only):\nYou MUST respond ONLY with valid, well-formed JSON. No markdown code blocks, no text before or after the JSON. Start with { and end with }.\nJSON rules: match every { with }, every [ with ]; use double quotes for strings; inside string values escape double quotes as \\\"; no trailing commas. Emojis and Unicode inside strings are fine, but the surrounding structure must be valid JSON so the response can be parsed.\nUse this format for every response: { \"actions\": [ { \"action\": \"...\", \"params\": { ... } }, ... ] }\n\nImportant: Always include at least one reply action so the user gets a text response. In addition you may include other actions (delete, pin, timeout). When you perform an action (e.g. delete a message), also send a short reply like \"Done.\" or \"Deleted.\" or \"Deleting the message.\" so the user gets feedback.\n\nAvailable actions:\n- reply: Params { \"text\": \"your message\" }.\n- send_dm: Params { \"user_id\": \"<telegram_user_id>\", \"text\": \"message\" }.\n- pin_message: Params { \"message_id\": <number> }.\n- timeout_message_author: Params { \"message_id\": <number>, \"duration_seconds\": <1-60> }. System resolves author from storage.\n- delete_message: Params { \"message_id\": <number> }. Use when the user refers to a message by context (e.g. \"delete the message where X said Y\") â€” get message_id from recent messages in context.\n- delete_reply_to_message: Params {} (no message_id). Use when the user REPLIED to a message and asks to delete it (e.g. \"delete this message I'm replying to\").\n- pin_reply_to_message: Params {} (no message_id). Use when the user replied to a message and asks to pin it.\n- timeout_reply_to_author: Params { \"duration_seconds\": <1-60> } optional. Use when the user replied to a message and asks to timeout that message's author.\n\nMessage IDs: Recent messages in context are formatted with [message_id: <number>]. For \"delete that message\" / \"pin that\" / \"timeout who said Y\" when they refer by context, use delete_message/pin_message/timeout_message_author with that message_id. When they reply to a message and say \"delete this\" or \"timeout them\", use delete_reply_to_message or timeout_reply_to_author with no message_id.\n\nExample (user replied and asked to delete): { \"actions\": [ { \"action\": \"delete_reply_to_message\", \"params\": {} }, { \"action\": \"reply\", \"params\": { \"text\": \"Done.\" } } ] }\nExample (by context): { \"actions\": [ { \"action\": \"delete_message\", \"params\": { \"message_id\": 12345 } }, { \"action\": \"reply\", \"params\": { \"text\": \"Deleted.\" } } ] }",
        "enable_thinking": true
      }
    }
  ],
  "connections": [
    {
      "from": "16",
      "from_output": "storage_instance",
      "to": "15",
      "to_input": "storage_instance"
    },
    {
      "from": "16",
      "from_output": "storage_instance",
      "to": "14",
      "to_input": "storage_instance"
    },
    {
      "from": "4",
      "from_output": "model",
      "to": "6",
      "to_input": "model"
    },
    {
      "from": "4",
      "from_output": "model",
      "to": "15",
      "to_input": "model"
    },
    {
      "from": "4",
      "from_output": "model",
      "to": "14",
      "to_input": "model"
    },
    {
      "from": "4",
      "from_output": "model",
      "to": "17",
      "to_input": "model"
    },
    {
      "from": "12",
      "from_output": "message",
      "to": "15",
      "to_input": "message"
    },
    {
      "from": "12",
      "from_output": "message",
      "to": "14",
      "to_input": "message"
    },
    {
      "from": "12",
      "from_output": "user_id",
      "to": "15",
      "to_input": "user_id"
    },
    {
      "from": "12",
      "from_output": "user_id",
      "to": "26",
      "to_input": "user_id"
    },
    {
      "from": "12",
      "from_output": "username",
      "to": "15",
      "to_input": "username"
    },
    {
      "from": "12",
      "from_output": "chat_id",
      "to": "15",
      "to_input": "chat_id"
    },
    {
      "from": "12",
      "from_output": "message_id",
      "to": "15",
      "to_input": "message_id"
    },
    {
      "from": "12",
      "from_output": "chat_id",
      "to": "14",
      "to_input": "chat_id"
    },
    {
      "from": "12",
      "from_output": "chat_id",
      "to": "20",
      "to_input": "in"
    },
    {
      "from": "12",
      "from_output": "message_id",
      "to": "21",
      "to_input": "in"
    },
    {
      "from": "12",
      "from_output": "reply_to_message_id",
      "to": "26",
      "to_input": "reply_to_message_id"
    },
    {
      "from": "16",
      "from_output": "storage_instance",
      "to": "26",
      "to_input": "storage_instance"
    },
    {
      "from": "12",
      "from_output": "is_mention",
      "to": "18",
      "to_input": "a"
    },
    {
      "from": "12",
      "from_output": "is_reply_to_bot",
      "to": "18",
      "to_input": "b"
    },
    {
      "from": "12",
      "from_output": "is_dm",
      "to": "24",
      "to_input": "b"
    },
    {
      "from": "20",
      "from_output": "out",
      "to": "22",
      "to_input": "in"
    },
    {
      "from": "21",
      "from_output": "out",
      "to": "23",
      "to_input": "in"
    },
    {
      "from": "23",
      "from_output": "out",
      "to": "26",
      "to_input": "message_id"
    },
    {
      "from": "22",
      "from_output": "out",
      "to": "26",
      "to_input": "chat_id"
    },
    {
      "from": "14",
      "from_output": "context",
      "to": "6",
      "to_input": "context"
    },
    {
      "from": "14",
      "from_output": "message",
      "to": "18",
      "to_input": "value"
    },
    {
      "from": "14",
      "from_output": "message",
      "to": "19",
      "to_input": "value"
    },
    {
      "from": "14",
      "from_output": "message",
      "to": "24",
      "to_input": "value"
    },
    {
      "from": "17",
      "from_output": "result",
      "to": "19",
      "to_input": "b"
    },
    {
      "from": "18",
      "from_output": "result",
      "to": "24",
      "to_input": "a"
    },
    {
      "from": "24",
      "from_output": "result",
      "to": "19",
      "to_input": "a"
    },
    {
      "from": "24",
      "from_output": "reject",
      "to": "17",
      "to_input": "message"
    },
    {
      "from": "19",
      "from_output": "pass",
      "to": "6",
      "to_input": "query"
    },
    {
      "from": "26",
      "from_output": "debug_text",
      "to": "27",
      "to_input": "text"
    },
    {
      "from": "25",
      "from_output": "tg_actions",
      "to": "26",
      "to_input": "actions"
    },
    {
      "from": "6",
      "from_output": "response",
      "to": "25",
      "to_input": "response"
    },
    {
      "from": "16",
      "from_output": "base_path",
      "to": "30",
      "to_input": "base_path"
    },
    {
      "from": "28",
      "from_output": "state",
      "to": "30",
      "to_input": "state"
    },
    {
      "from": "29",
      "from_output": "trigger",
      "to": "30",
      "to_input": "trigger"
    },
    {
      "from": "30",
      "from_output": "summary",
      "to": "31",
      "to_input": "text"
    },
    {
      "from": "32",
      "from_output": "private_key",
      "to": "33",
      "to_input": "private_key"
    },
    {
      "from": "25",
      "from_output": "tg_actions",
      "to": "33",
      "to_input": "tg_actions"
    }
  ]
}
